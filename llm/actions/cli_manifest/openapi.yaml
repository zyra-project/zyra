# SPDX-License-Identifier: Apache-2.0
openapi: 3.1.0
info:
  title: Zyra CLI Manifest API
  version: "1.0.0"
  description: |
    Exposes the Zyra CLI command manifests (one JSON per domain, indexed by
    `zyra_capabilities/zyra_capabilities_index.json`) directly from the
    NOAA-GSL/zyra repository.

    ⚠️ Note: An `/execute` endpoint is included as a placeholder but is currently disabled.
    Only the `/zyra_capabilities/zyra_capabilities_index.json` endpoint is active.

servers:
  - url: https://raw.githubusercontent.com/NOAA-GSL/zyra/main/src/zyra/wizard

paths:
  /zyra_capabilities/acquire.json:
    get:
      summary: Acquire/import commands
      operationId: acquireCommands
      description: Fetch the CLI manifest entries for acquire/import (data ingress) commands.
      responses:
        '200':
          description: Acquire/import command metadata (includes the `import` alias).
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object
  /zyra_capabilities/process.json:
    get:
      summary: Process/transform commands
      operationId: processCommands
      description: Fetch CLI manifest entries for processing and transform stages.
      responses:
        '200':
          description: Process/transform command metadata.
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object
  /zyra_capabilities/visualize.json:
    get:
      summary: Visualize/render commands
      operationId: visualizeCommands
      description: Fetch CLI manifest entries for visualization/render stages (includes the `render` alias).
      responses:
        '200':
          description: Visualize/render command metadata.
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object
  /zyra_capabilities/disseminate.json:
    get:
      summary: Disseminate/export commands
      operationId: disseminateCommands
      description: Fetch CLI manifest entries for disseminate/export stages (includes the `export` and `decimate` aliases).
      responses:
        '200':
          description: Disseminate/export command metadata.
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object
  /zyra_capabilities/transform.json:
    get:
      summary: Transform helper commands
      operationId: transformCommands
      description: Fetch CLI manifest entries for the transform helper stage.
      responses:
        '200':
          description: Transform command metadata.
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object
  /zyra_capabilities/search.json:
    get:
      summary: Search commands
      operationId: searchCommands
      description: Fetch CLI manifest entries for `zyra search`.
      responses:
        '200':
          description: Search command metadata.
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object
  /zyra_capabilities/run.json:
    get:
      summary: Run commands
      operationId: runCommands
      description: Fetch CLI manifest entries for `zyra run` (workflow executor).
      responses:
        '200':
          description: Run command metadata.
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object
  /zyra_capabilities/simulate.json:
    get:
      summary: Simulate commands
      operationId: simulateCommands
      description: Fetch CLI manifest entries for simulate stage.
      responses:
        '200':
          description: Simulate command metadata.
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object
  /zyra_capabilities/decide.json:
    get:
      summary: Decide commands
      operationId: decideCommands
      description: Fetch CLI manifest entries for decide/optimize stage (includes the `optimize` alias).
      responses:
        '200':
          description: Decide command metadata.
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object
  /zyra_capabilities/narrate.json:
    get:
      summary: Narrate commands
      operationId: narrateCommands
      description: Fetch CLI manifest entries for narrate stage.
      responses:
        '200':
          description: Narrate command metadata.
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object
  /zyra_capabilities/verify.json:
    get:
      summary: Verify commands
      operationId: verifyCommands
      description: Fetch CLI manifest entries for verify stage.
      responses:
        '200':
          description: Verify command metadata.
          content:
            application/json:
              schema:
                type: object
                description: Mapping of CLI commands to metadata.
                properties: {}
                additionalProperties:
                  type: object

  /execute:
    post:
      summary: Execute a Zyra command (DISABLED)
      operationId: executeCommand
      description: |
        Placeholder for future functionality: run CLI commands via API.
        This endpoint is currently disabled and will always return 501 Not Implemented.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                command:
                  type: string
                  description: CLI command name
                  example: "generate-plot"
                args:
                  type: array
                  items:
                    type: string
                  description: Positional arguments
                  example: ["dataset.csv"]
                options:
                  type: object
                  additionalProperties: true
                  description: CLI options as key-value pairs
                  example:
                    --input: "dataset.csv"
                    --format: "png"
      responses:
        '501':
          description: Not implemented
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "This endpoint is disabled. Command execution is not available."
